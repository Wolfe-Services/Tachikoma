# Spec 570: Quickstart Onboarding

**Phase:** 27 - Ralph Integration  
**Status:** Planned  
**Priority:** P0 - Critical  
**Dependencies:** None (standalone)
**Inspired By:** Ralph TUI's 2-minute quickstart

## Overview

Create a `tachikoma init --quick` command that gets users from zero to running in under 2 minutes, with auto-detection and sensible defaults.

## Problem Statement

Current Tachikoma setup requires:
1. Installing Rust + Cargo
2. Installing Node.js + npm
3. Cloning repo
4. Running `npm install:all`
5. Building Rust crates
6. Configuring API keys
7. Understanding the spec system

Ralph TUI: `npm install -g ralph-tui && ralph-tui setup` - done.

## Acceptance Criteria

- [x] Create `tachikoma init` CLI command
- [x] Auto-detect installed tools (cargo, node, jj, git)
- [x] Auto-detect API keys from environment or known locations
- [x] Create minimal `.tachikoma/config.yaml` with sane defaults
- [x] Create sample `specs/` directory with getting-started spec
- [x] Print clear next steps
- [x] Support `--quick` flag for non-interactive mode
- [x] Add `tachikoma doctor` to diagnose setup issues

## User Experience

### Interactive Mode (default)
```bash
$ tachikoma init

üï∑Ô∏è Tachikoma Setup

Checking your environment...
  ‚úì Rust 1.82.0 installed
  ‚úì Node.js 22.0.0 installed
  ‚úì jj 0.24.0 installed
  ‚úì ANTHROPIC_API_KEY found

Configure your project:
? Default AI backend (brain): [claude] 
? Default think-tank (oracle): [o3]
? Enable attended mode by default? [Y/n]

Creating configuration...
  ‚úì Created .tachikoma/config.yaml
  ‚úì Created specs/README.md
  ‚úì Created specs/001-getting-started.md

üéâ Setup complete!

Next steps:
  1. Run `tachikoma chat` to create your first spec
  2. Run `tachikoma run` to implement it
  3. Run `tachikoma loop` for continuous development

Happy coding, Major! üï∑Ô∏è
```

### Quick Mode
```bash
$ tachikoma init --quick

üï∑Ô∏è Quick setup with defaults...
  ‚úì Environment OK
  ‚úì Config created
  ‚úì Ready to go!

Run `tachikoma run` to start.
```

## Doctor Command

```bash
$ tachikoma doctor

üï∑Ô∏è Tachikoma Health Check

Environment:
  ‚úì Rust 1.82.0
  ‚úì Node.js 22.0.0
  ‚úì jj 0.24.0
  ‚úó ripgrep not found (code_search won't work)

API Keys:
  ‚úì ANTHROPIC_API_KEY
  ‚úó OPENAI_API_KEY (optional)
  ‚úó GOOGLE_API_KEY (optional)

Configuration:
  ‚úì .tachikoma/config.yaml exists
  ‚úì Backend 'claude' is available
  ‚úì Specs directory found (546 specs)

Issues found:
  1. Install ripgrep: `brew install ripgrep`

Overall: üü° Ready with warnings
```

## Implementation Details

### Files to Create

1. **`crates/tachikoma-cli/src/commands/init.rs`**
   ```rust
   pub struct InitCommand {
       #[arg(short, long)]
       quick: bool,
       
       #[arg(long)]
       brain: Option<String>,
       
       #[arg(long)]
       oracle: Option<String>,
   }
   ```

2. **`crates/tachikoma-cli/src/commands/doctor.rs`**
   - Environment checks
   - API key detection
   - Config validation
   - Dependency verification

3. **`crates/tachikoma-common-config/src/detection.rs`**
   - Tool detection (which rust, node, jj, rg)
   - API key location scanning
   - Platform-specific paths

### Default Config Template

```yaml
# Tachikoma Configuration
# Generated by `tachikoma init`

backend:
  brain: claude                    # Fast agentic model
  think_tank: o3                   # Deep reasoning oracle

loop:
  max_iterations: 50
  redline_threshold: 150000        # Token limit before reboot
  stop_on:
    - test_fail_streak: 3
    - no_progress: 5

policies:
  attended_by_default: true
  auto_commit: true
```

### Getting Started Spec Template

```markdown
# Spec 001: Getting Started

**Status:** Ready
**Priority:** P0

## Your First Tachikoma Mission

Welcome, Major! This spec will help you get familiar with Tachikoma.

## Acceptance Criteria

- [x] Read this spec completely
- [x] Run `tachikoma run --spec 001` to let Tachikoma implement something simple
- [x] Watch the loop execute and learn the pattern
- [x] Create your first custom spec with `tachikoma chat`

## What Happens Next

When you run `tachikoma run`, Tachikoma will:
1. Read this spec
2. Understand the acceptance criteria
3. Execute tasks to complete each criterion
4. Mark checkboxes as it goes
5. Commit when done

Happy coding! üï∑Ô∏è
```

## Testing

- Test init on fresh directory (no existing config)
- Test init with existing config (should warn/merge)
- Test quick mode skips all prompts
- Test doctor catches missing dependencies
- Verify created config is valid YAML

## References

- Ralph TUI's setup wizard
- Existing config types: `crates/tachikoma-common-config/`
- CLI structure: `crates/tachikoma-cli/`
