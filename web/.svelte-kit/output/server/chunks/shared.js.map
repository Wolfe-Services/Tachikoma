{"version":3,"file":"shared.js","sources":["../../../../node_modules/esm-env/false.js","../../../../node_modules/@sveltejs/kit/src/runtime/form-utils.js","../../../../node_modules/@sveltejs/kit/src/runtime/shared.js"],"sourcesContent":["export default false;\n","/** @import { RemoteForm } from '@sveltejs/kit' */\n/** @import { BinaryFormMeta, InternalRemoteFormIssue } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\n\nimport { DEV } from 'esm-env';\nimport * as devalue from 'devalue';\nimport { text_decoder, text_encoder } from './utils.js';\n\n/**\n * Sets a value in a nested object using a path string, mutating the original object\n * @param {Record<string, any>} object\n * @param {string} path_string\n * @param {any} value\n */\nexport function set_nested_value(object, path_string, value) {\n\tif (path_string.startsWith('n:')) {\n\t\tpath_string = path_string.slice(2);\n\t\tvalue = value === '' ? undefined : parseFloat(value);\n\t} else if (path_string.startsWith('b:')) {\n\t\tpath_string = path_string.slice(2);\n\t\tvalue = value === 'on';\n\t}\n\n\tdeep_set(object, split_path(path_string), value);\n}\n\n/**\n * Convert `FormData` into a POJO\n * @param {FormData} data\n */\nexport function convert_formdata(data) {\n\t/** @type {Record<string, any>} */\n\tconst result = {};\n\n\tfor (let key of data.keys()) {\n\t\tconst is_array = key.endsWith('[]');\n\t\t/** @type {any[]} */\n\t\tlet values = data.getAll(key);\n\n\t\tif (is_array) key = key.slice(0, -2);\n\n\t\tif (values.length > 1 && !is_array) {\n\t\t\tthrow new Error(`Form cannot contain duplicated keys â€” \"${key}\" has ${values.length} values`);\n\t\t}\n\n\t\t// an empty `<input type=\"file\">` will submit a non-existent file, bizarrely\n\t\tvalues = values.filter(\n\t\t\t(entry) => typeof entry === 'string' || entry.name !== '' || entry.size > 0\n\t\t);\n\n\t\tif (key.startsWith('n:')) {\n\t\t\tkey = key.slice(2);\n\t\t\tvalues = values.map((v) => (v === '' ? undefined : parseFloat(/** @type {string} */ (v))));\n\t\t} else if (key.startsWith('b:')) {\n\t\t\tkey = key.slice(2);\n\t\t\tvalues = values.map((v) => v === 'on');\n\t\t}\n\n\t\tset_nested_value(result, key, is_array ? values : values[0]);\n\t}\n\n\treturn result;\n}\n\nexport const BINARY_FORM_CONTENT_TYPE = 'application/x-sveltekit-formdata';\nconst BINARY_FORM_VERSION = 0;\n\n/**\n * The binary format is as follows:\n * - 1 byte: Format version\n * - 4 bytes: Length of the header (u32)\n * - 2 bytes: Length of the file offset table (u16)\n * - header: devalue.stringify([data, meta])\n * - file offset table: JSON.stringify([offset1, offset2, ...]) (empty if no files) (offsets start from the end of the table)\n * - file1, file2, ...\n * @param {Record<string, any>} data\n * @param {BinaryFormMeta} meta\n */\nexport function serialize_binary_form(data, meta) {\n\t/** @type {Array<BlobPart>} */\n\tconst blob_parts = [new Uint8Array([BINARY_FORM_VERSION])];\n\n\t/** @type {Array<[file: File, index: number]>} */\n\tconst files = [];\n\n\tif (!meta.remote_refreshes?.length) {\n\t\tdelete meta.remote_refreshes;\n\t}\n\n\tconst encoded_header = devalue.stringify([data, meta], {\n\t\tFile: (file) => {\n\t\t\tif (!(file instanceof File)) return;\n\n\t\t\tfiles.push([file, files.length]);\n\t\t\treturn [file.name, file.type, file.size, file.lastModified, files.length - 1];\n\t\t}\n\t});\n\n\tconst encoded_header_buffer = text_encoder.encode(encoded_header);\n\n\tlet encoded_file_offsets = '';\n\tif (files.length) {\n\t\t// Sort small files to the front\n\t\tfiles.sort(([a], [b]) => a.size - b.size);\n\n\t\t/** @type {Array<number>} */\n\t\tconst file_offsets = new Array(files.length);\n\t\tlet start = 0;\n\t\tfor (const [file, index] of files) {\n\t\t\tfile_offsets[index] = start;\n\t\t\tstart += file.size;\n\t\t}\n\t\tencoded_file_offsets = JSON.stringify(file_offsets);\n\t}\n\n\tconst length_buffer = new Uint8Array(4);\n\tconst length_view = new DataView(length_buffer.buffer);\n\n\tlength_view.setUint32(0, encoded_header_buffer.byteLength, true);\n\tblob_parts.push(length_buffer.slice());\n\n\tlength_view.setUint16(0, encoded_file_offsets.length, true);\n\tblob_parts.push(length_buffer.slice(0, 2));\n\n\tblob_parts.push(encoded_header_buffer);\n\tblob_parts.push(encoded_file_offsets);\n\n\tfor (const [file] of files) {\n\t\tblob_parts.push(file);\n\t}\n\n\treturn {\n\t\tblob: new Blob(blob_parts)\n\t};\n}\n\n/**\n * @param {Request} request\n * @returns {Promise<{ data: Record<string, any>; meta: BinaryFormMeta; form_data: FormData | null }>}\n */\nexport async function deserialize_binary_form(request) {\n\tif (request.headers.get('content-type') !== BINARY_FORM_CONTENT_TYPE) {\n\t\tconst form_data = await request.formData();\n\t\treturn { data: convert_formdata(form_data), meta: {}, form_data };\n\t}\n\tif (!request.body) {\n\t\tthrow new Error('Could not deserialize binary form: no body');\n\t}\n\n\tconst reader = request.body.getReader();\n\n\t/** @type {Array<Promise<Uint8Array<ArrayBuffer> | undefined>>} */\n\tconst chunks = [];\n\n\t/**\n\t * @param {number} index\n\t * @returns {Promise<Uint8Array<ArrayBuffer> | undefined>}\n\t */\n\tasync function get_chunk(index) {\n\t\tif (index in chunks) return chunks[index];\n\n\t\tlet i = chunks.length;\n\t\twhile (i <= index) {\n\t\t\tchunks[i] = reader.read().then((chunk) => chunk.value);\n\t\t\ti++;\n\t\t}\n\t\treturn chunks[index];\n\t}\n\n\t/**\n\t * @param {number} offset\n\t * @param {number} length\n\t * @returns {Promise<Uint8Array | null>}\n\t */\n\tasync function get_buffer(offset, length) {\n\t\t/** @type {Uint8Array} */\n\t\tlet start_chunk;\n\t\tlet chunk_start = 0;\n\t\t/** @type {number} */\n\t\tlet chunk_index;\n\t\tfor (chunk_index = 0; ; chunk_index++) {\n\t\t\tconst chunk = await get_chunk(chunk_index);\n\t\t\tif (!chunk) return null;\n\n\t\t\tconst chunk_end = chunk_start + chunk.byteLength;\n\t\t\t// If this chunk contains the target offset\n\t\t\tif (offset >= chunk_start && offset < chunk_end) {\n\t\t\t\tstart_chunk = chunk;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tchunk_start = chunk_end;\n\t\t}\n\t\t// If the buffer is completely contained in one chunk, do a subarray\n\t\tif (offset + length <= chunk_start + start_chunk.byteLength) {\n\t\t\treturn start_chunk.subarray(offset - chunk_start, offset + length - chunk_start);\n\t\t}\n\t\t// Otherwise, copy the data into a new buffer\n\t\tconst buffer = new Uint8Array(length);\n\t\tbuffer.set(start_chunk.subarray(offset - chunk_start));\n\t\tlet cursor = start_chunk.byteLength - offset + chunk_start;\n\t\twhile (cursor < length) {\n\t\t\tchunk_index++;\n\t\t\tlet chunk = await get_chunk(chunk_index);\n\t\t\tif (!chunk) return null;\n\t\t\tif (chunk.byteLength > length - cursor) {\n\t\t\t\tchunk = chunk.subarray(0, length - cursor);\n\t\t\t}\n\t\t\tbuffer.set(chunk, cursor);\n\t\t\tcursor += chunk.byteLength;\n\t\t}\n\n\t\treturn buffer;\n\t}\n\n\tconst header = await get_buffer(0, 1 + 4 + 2);\n\tif (!header) throw new Error('Could not deserialize binary form: too short');\n\n\tif (header[0] !== BINARY_FORM_VERSION) {\n\t\tthrow new Error(\n\t\t\t`Could not deserialize binary form: got version ${header[0]}, expected version ${BINARY_FORM_VERSION}`\n\t\t);\n\t}\n\tconst header_view = new DataView(header.buffer, header.byteOffset, header.byteLength);\n\tconst data_length = header_view.getUint32(1, true);\n\tconst file_offsets_length = header_view.getUint16(5, true);\n\n\t// Read the form data\n\tconst data_buffer = await get_buffer(1 + 4 + 2, data_length);\n\tif (!data_buffer) throw new Error('Could not deserialize binary form: data too short');\n\n\t/** @type {Array<number>} */\n\tlet file_offsets;\n\t/** @type {number} */\n\tlet files_start_offset;\n\tif (file_offsets_length > 0) {\n\t\t// Read the file offset table\n\t\tconst file_offsets_buffer = await get_buffer(1 + 4 + 2 + data_length, file_offsets_length);\n\t\tif (!file_offsets_buffer)\n\t\t\tthrow new Error('Could not deserialize binary form: file offset table too short');\n\n\t\tfile_offsets = /** @type {Array<number>} */ (\n\t\t\tJSON.parse(text_decoder.decode(file_offsets_buffer))\n\t\t);\n\t\tfiles_start_offset = 1 + 4 + 2 + data_length + file_offsets_length;\n\t}\n\n\tconst [data, meta] = devalue.parse(text_decoder.decode(data_buffer), {\n\t\tFile: ([name, type, size, last_modified, index]) => {\n\t\t\treturn new Proxy(\n\t\t\t\tnew LazyFile(\n\t\t\t\t\tname,\n\t\t\t\t\ttype,\n\t\t\t\t\tsize,\n\t\t\t\t\tlast_modified,\n\t\t\t\t\tget_chunk,\n\t\t\t\t\tfiles_start_offset + file_offsets[index]\n\t\t\t\t),\n\t\t\t\t{\n\t\t\t\t\tgetPrototypeOf() {\n\t\t\t\t\t\t// Trick validators into thinking this is a normal File\n\t\t\t\t\t\treturn File.prototype;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t});\n\n\t// Read the request body asyncronously so it doesn't stall\n\tvoid (async () => {\n\t\tlet has_more = true;\n\t\twhile (has_more) {\n\t\t\tconst chunk = await get_chunk(chunks.length);\n\t\t\thas_more = !!chunk;\n\t\t}\n\t})();\n\n\treturn { data, meta, form_data: null };\n}\n\n/** @implements {File} */\nclass LazyFile {\n\t/** @type {(index: number) => Promise<Uint8Array<ArrayBuffer> | undefined>} */\n\t#get_chunk;\n\t/** @type {number} */\n\t#offset;\n\t/**\n\t * @param {string} name\n\t * @param {string} type\n\t * @param {number} size\n\t * @param {number} last_modified\n\t * @param {(index: number) => Promise<Uint8Array<ArrayBuffer> | undefined>} get_chunk\n\t * @param {number} offset\n\t */\n\tconstructor(name, type, size, last_modified, get_chunk, offset) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.size = size;\n\t\tthis.lastModified = last_modified;\n\t\tthis.webkitRelativePath = '';\n\t\tthis.#get_chunk = get_chunk;\n\t\tthis.#offset = offset;\n\n\t\t// TODO - hacky, required for private members to be accessed on proxy\n\t\tthis.arrayBuffer = this.arrayBuffer.bind(this);\n\t\tthis.bytes = this.bytes.bind(this);\n\t\tthis.slice = this.slice.bind(this);\n\t\tthis.stream = this.stream.bind(this);\n\t\tthis.text = this.text.bind(this);\n\t}\n\t/** @type {ArrayBuffer | undefined} */\n\t#buffer;\n\tasync arrayBuffer() {\n\t\tthis.#buffer ??= await new Response(this.stream()).arrayBuffer();\n\t\treturn this.#buffer;\n\t}\n\tasync bytes() {\n\t\treturn new Uint8Array(await this.arrayBuffer());\n\t}\n\t/**\n\t * @param {number=} start\n\t * @param {number=} end\n\t * @param {string=} contentType\n\t */\n\tslice(start = 0, end = this.size, contentType = this.type) {\n\t\t// https://github.com/nodejs/node/blob/a5f3cd8cb5ba9e7911d93c5fd3ebc6d781220dd8/lib/internal/blob.js#L240\n\t\tif (start < 0) {\n\t\t\tstart = Math.max(this.size + start, 0);\n\t\t} else {\n\t\t\tstart = Math.min(start, this.size);\n\t\t}\n\n\t\tif (end < 0) {\n\t\t\tend = Math.max(this.size + end, 0);\n\t\t} else {\n\t\t\tend = Math.min(end, this.size);\n\t\t}\n\t\tconst size = Math.max(end - start, 0);\n\t\tconst file = new LazyFile(\n\t\t\tthis.name,\n\t\t\tcontentType,\n\t\t\tsize,\n\t\t\tthis.lastModified,\n\t\t\tthis.#get_chunk,\n\t\t\tthis.#offset + start\n\t\t);\n\n\t\treturn file;\n\t}\n\tstream() {\n\t\tlet cursor = 0;\n\t\tlet chunk_index = 0;\n\t\treturn new ReadableStream({\n\t\t\tstart: async (controller) => {\n\t\t\t\tlet chunk_start = 0;\n\t\t\t\tlet start_chunk = null;\n\t\t\t\tfor (chunk_index = 0; ; chunk_index++) {\n\t\t\t\t\tconst chunk = await this.#get_chunk(chunk_index);\n\t\t\t\t\tif (!chunk) return null;\n\n\t\t\t\t\tconst chunk_end = chunk_start + chunk.byteLength;\n\t\t\t\t\t// If this chunk contains the target offset\n\t\t\t\t\tif (this.#offset >= chunk_start && this.#offset < chunk_end) {\n\t\t\t\t\t\tstart_chunk = chunk;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tchunk_start = chunk_end;\n\t\t\t\t}\n\t\t\t\t// If the buffer is completely contained in one chunk, do a subarray\n\t\t\t\tif (this.#offset + this.size <= chunk_start + start_chunk.byteLength) {\n\t\t\t\t\tcontroller.enqueue(\n\t\t\t\t\t\tstart_chunk.subarray(this.#offset - chunk_start, this.#offset + this.size - chunk_start)\n\t\t\t\t\t);\n\t\t\t\t\tcontroller.close();\n\t\t\t\t} else {\n\t\t\t\t\tcontroller.enqueue(start_chunk.subarray(this.#offset - chunk_start));\n\t\t\t\t\tcursor = start_chunk.byteLength - this.#offset + chunk_start;\n\t\t\t\t}\n\t\t\t},\n\t\t\tpull: async (controller) => {\n\t\t\t\tchunk_index++;\n\t\t\t\tlet chunk = await this.#get_chunk(chunk_index);\n\t\t\t\tif (!chunk) {\n\t\t\t\t\tcontroller.error('Could not deserialize binary form: incomplete file data');\n\t\t\t\t\tcontroller.close();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (chunk.byteLength > this.size - cursor) {\n\t\t\t\t\tchunk = chunk.subarray(0, this.size - cursor);\n\t\t\t\t}\n\t\t\t\tcontroller.enqueue(chunk);\n\t\t\t\tcursor += chunk.byteLength;\n\t\t\t\tif (cursor >= this.size) {\n\t\t\t\t\tcontroller.close();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\tasync text() {\n\t\treturn text_decoder.decode(await this.arrayBuffer());\n\t}\n}\n\nconst path_regex = /^[a-zA-Z_$]\\w*(\\.[a-zA-Z_$]\\w*|\\[\\d+\\])*$/;\n\n/**\n * @param {string} path\n */\nexport function split_path(path) {\n\tif (!path_regex.test(path)) {\n\t\tthrow new Error(`Invalid path ${path}`);\n\t}\n\n\treturn path.split(/\\.|\\[|\\]/).filter(Boolean);\n}\n\n/**\n * Check if a property key is dangerous and could lead to prototype pollution\n * @param {string} key\n */\nfunction check_prototype_pollution(key) {\n\tif (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n\t\tthrow new Error(\n\t\t\t`Invalid key \"${key}\"` +\n\t\t\t\t(DEV ? ': This key is not allowed to prevent prototype pollution.' : '')\n\t\t);\n\t}\n}\n\n/**\n * Sets a value in a nested object using an array of keys, mutating the original object.\n * @param {Record<string, any>} object\n * @param {string[]} keys\n * @param {any} value\n */\nexport function deep_set(object, keys, value) {\n\tlet current = object;\n\n\tfor (let i = 0; i < keys.length - 1; i += 1) {\n\t\tconst key = keys[i];\n\n\t\tcheck_prototype_pollution(key);\n\n\t\tconst is_array = /^\\d+$/.test(keys[i + 1]);\n\t\tconst exists = Object.hasOwn(current, key);\n\t\tconst inner = current[key];\n\n\t\tif (exists && is_array !== Array.isArray(inner)) {\n\t\t\tthrow new Error(`Invalid array key ${keys[i + 1]}`);\n\t\t}\n\n\t\tif (!exists) {\n\t\t\tcurrent[key] = is_array ? [] : {};\n\t\t}\n\n\t\tcurrent = current[key];\n\t}\n\n\tconst final_key = keys[keys.length - 1];\n\tcheck_prototype_pollution(final_key);\n\tcurrent[final_key] = value;\n}\n\n/**\n * @param {StandardSchemaV1.Issue} issue\n * @param {boolean} server Whether this issue came from server validation\n */\nexport function normalize_issue(issue, server = false) {\n\t/** @type {InternalRemoteFormIssue} */\n\tconst normalized = { name: '', path: [], message: issue.message, server };\n\n\tif (issue.path !== undefined) {\n\t\tlet name = '';\n\n\t\tfor (const segment of issue.path) {\n\t\t\tconst key = /** @type {string | number} */ (\n\t\t\t\ttypeof segment === 'object' ? segment.key : segment\n\t\t\t);\n\n\t\t\tnormalized.path.push(key);\n\n\t\t\tif (typeof key === 'number') {\n\t\t\t\tname += `[${key}]`;\n\t\t\t} else if (typeof key === 'string') {\n\t\t\t\tname += name === '' ? key : '.' + key;\n\t\t\t}\n\t\t}\n\n\t\tnormalized.name = name;\n\t}\n\n\treturn normalized;\n}\n\n/**\n * @param {InternalRemoteFormIssue[]} issues\n */\nexport function flatten_issues(issues) {\n\t/** @type {Record<string, InternalRemoteFormIssue[]>} */\n\tconst result = {};\n\n\tfor (const issue of issues) {\n\t\t(result.$ ??= []).push(issue);\n\n\t\tlet name = '';\n\n\t\tif (issue.path !== undefined) {\n\t\t\tfor (const key of issue.path) {\n\t\t\t\tif (typeof key === 'number') {\n\t\t\t\t\tname += `[${key}]`;\n\t\t\t\t} else if (typeof key === 'string') {\n\t\t\t\t\tname += name === '' ? key : '.' + key;\n\t\t\t\t}\n\n\t\t\t\t(result[name] ??= []).push(issue);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Gets a nested value from an object using a path array\n * @param {Record<string, any>} object\n * @param {(string | number)[]} path\n * @returns {any}\n */\n\nexport function deep_get(object, path) {\n\tlet current = object;\n\tfor (const key of path) {\n\t\tif (current == null || typeof current !== 'object') {\n\t\t\treturn current;\n\t\t}\n\t\tcurrent = current[key];\n\t}\n\treturn current;\n}\n\n/**\n * Creates a proxy-based field accessor for form data\n * @param {any} target - Function or empty POJO\n * @param {() => Record<string, any>} get_input - Function to get current input data\n * @param {(path: (string | number)[], value: any) => void} set_input - Function to set input data\n * @param {() => Record<string, InternalRemoteFormIssue[]>} get_issues - Function to get current issues\n * @param {(string | number)[]} path - Current access path\n * @returns {any} Proxy object with name(), value(), and issues() methods\n */\nexport function create_field_proxy(target, get_input, set_input, get_issues, path = []) {\n\tconst get_value = () => {\n\t\treturn deep_get(get_input(), path);\n\t};\n\n\treturn new Proxy(target, {\n\t\tget(target, prop) {\n\t\t\tif (typeof prop === 'symbol') return target[prop];\n\n\t\t\t// Handle array access like jobs[0]\n\t\t\tif (/^\\d+$/.test(prop)) {\n\t\t\t\treturn create_field_proxy({}, get_input, set_input, get_issues, [\n\t\t\t\t\t...path,\n\t\t\t\t\tparseInt(prop, 10)\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\tconst key = build_path_string(path);\n\n\t\t\tif (prop === 'set') {\n\t\t\t\tconst set_func = function (/** @type {any} */ newValue) {\n\t\t\t\t\tset_input(path, newValue);\n\t\t\t\t\treturn newValue;\n\t\t\t\t};\n\t\t\t\treturn create_field_proxy(set_func, get_input, set_input, get_issues, [...path, prop]);\n\t\t\t}\n\n\t\t\tif (prop === 'value') {\n\t\t\t\treturn create_field_proxy(get_value, get_input, set_input, get_issues, [...path, prop]);\n\t\t\t}\n\n\t\t\tif (prop === 'issues' || prop === 'allIssues') {\n\t\t\t\tconst issues_func = () => {\n\t\t\t\t\tconst all_issues = get_issues()[key === '' ? '$' : key];\n\n\t\t\t\t\tif (prop === 'allIssues') {\n\t\t\t\t\t\treturn all_issues?.map((issue) => ({\n\t\t\t\t\t\t\tpath: issue.path,\n\t\t\t\t\t\t\tmessage: issue.message\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn all_issues\n\t\t\t\t\t\t?.filter((issue) => issue.name === key)\n\t\t\t\t\t\t?.map((issue) => ({\n\t\t\t\t\t\t\tpath: issue.path,\n\t\t\t\t\t\t\tmessage: issue.message\n\t\t\t\t\t\t}));\n\t\t\t\t};\n\n\t\t\t\treturn create_field_proxy(issues_func, get_input, set_input, get_issues, [...path, prop]);\n\t\t\t}\n\n\t\t\tif (prop === 'as') {\n\t\t\t\t/**\n\t\t\t\t * @param {string} type\n\t\t\t\t * @param {string} [input_value]\n\t\t\t\t */\n\t\t\t\tconst as_func = (type, input_value) => {\n\t\t\t\t\tconst is_array =\n\t\t\t\t\t\ttype === 'file multiple' ||\n\t\t\t\t\t\ttype === 'select multiple' ||\n\t\t\t\t\t\t(type === 'checkbox' && typeof input_value === 'string');\n\n\t\t\t\t\tconst prefix =\n\t\t\t\t\t\ttype === 'number' || type === 'range'\n\t\t\t\t\t\t\t? 'n:'\n\t\t\t\t\t\t\t: type === 'checkbox' && !is_array\n\t\t\t\t\t\t\t\t? 'b:'\n\t\t\t\t\t\t\t\t: '';\n\n\t\t\t\t\t// Base properties for all input types\n\t\t\t\t\t/** @type {Record<string, any>} */\n\t\t\t\t\tconst base_props = {\n\t\t\t\t\t\tname: prefix + key + (is_array ? '[]' : ''),\n\t\t\t\t\t\tget 'aria-invalid'() {\n\t\t\t\t\t\t\tconst issues = get_issues();\n\t\t\t\t\t\t\treturn key in issues ? 'true' : undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Add type attribute only for non-text inputs and non-select elements\n\t\t\t\t\tif (type !== 'text' && type !== 'select' && type !== 'select multiple') {\n\t\t\t\t\t\tbase_props.type = type === 'file multiple' ? 'file' : type;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle submit and hidden inputs\n\t\t\t\t\tif (type === 'submit' || type === 'hidden') {\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\tif (!input_value) {\n\t\t\t\t\t\t\t\tthrow new Error(`\\`${type}\\` inputs must have a value`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tvalue: { value: input_value, enumerable: true }\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle select inputs\n\t\t\t\t\tif (type === 'select' || type === 'select multiple') {\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tmultiple: { value: is_array, enumerable: true },\n\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\t\treturn get_value();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle checkbox inputs\n\t\t\t\t\tif (type === 'checkbox' || type === 'radio') {\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\tif (type === 'radio' && !input_value) {\n\t\t\t\t\t\t\t\tthrow new Error('Radio inputs must have a value');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (type === 'checkbox' && is_array && !input_value) {\n\t\t\t\t\t\t\t\tthrow new Error('Checkbox array inputs must have a value');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tvalue: { value: input_value ?? 'on', enumerable: true },\n\t\t\t\t\t\t\tchecked: {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\t\tconst value = get_value();\n\n\t\t\t\t\t\t\t\t\tif (type === 'radio') {\n\t\t\t\t\t\t\t\t\t\treturn value === input_value;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (is_array) {\n\t\t\t\t\t\t\t\t\t\treturn (value ?? []).includes(input_value);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle file inputs\n\t\t\t\t\tif (type === 'file' || type === 'file multiple') {\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tmultiple: { value: is_array, enumerable: true },\n\t\t\t\t\t\t\tfiles: {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\t\tconst value = get_value();\n\n\t\t\t\t\t\t\t\t\t// Convert File/File[] to FileList-like object\n\t\t\t\t\t\t\t\t\tif (value instanceof File) {\n\t\t\t\t\t\t\t\t\t\t// In browsers, we can create a proper FileList using DataTransfer\n\t\t\t\t\t\t\t\t\t\tif (typeof DataTransfer !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\t\tconst fileList = new DataTransfer();\n\t\t\t\t\t\t\t\t\t\t\tfileList.items.add(value);\n\t\t\t\t\t\t\t\t\t\t\treturn fileList.files;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Fallback for environments without DataTransfer\n\t\t\t\t\t\t\t\t\t\treturn { 0: value, length: 1 };\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (Array.isArray(value) && value.every((f) => f instanceof File)) {\n\t\t\t\t\t\t\t\t\t\tif (typeof DataTransfer !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\t\tconst fileList = new DataTransfer();\n\t\t\t\t\t\t\t\t\t\t\tvalue.forEach((file) => fileList.items.add(file));\n\t\t\t\t\t\t\t\t\t\t\treturn fileList.files;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Fallback for environments without DataTransfer\n\t\t\t\t\t\t\t\t\t\t/** @type {any} */\n\t\t\t\t\t\t\t\t\t\tconst fileListLike = { length: value.length };\n\t\t\t\t\t\t\t\t\t\tvalue.forEach((file, index) => {\n\t\t\t\t\t\t\t\t\t\t\tfileListLike[index] = file;\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\treturn fileListLike;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle all other input types (text, number, etc.)\n\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\tconst value = get_value();\n\t\t\t\t\t\t\t\treturn value != null ? String(value) : '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\treturn create_field_proxy(as_func, get_input, set_input, get_issues, [...path, 'as']);\n\t\t\t}\n\n\t\t\t// Handle property access (nested fields)\n\t\t\treturn create_field_proxy({}, get_input, set_input, get_issues, [...path, prop]);\n\t\t}\n\t});\n}\n\n/**\n * Builds a path string from an array of path segments\n * @param {(string | number)[]} path\n * @returns {string}\n */\nexport function build_path_string(path) {\n\tlet result = '';\n\n\tfor (const segment of path) {\n\t\tif (typeof segment === 'number') {\n\t\t\tresult += `[${segment}]`;\n\t\t} else {\n\t\t\tresult += result === '' ? segment : '.' + segment;\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * @param {RemoteForm<any, any>} instance\n * @deprecated remove in 3.0\n */\nexport function throw_on_old_property_access(instance) {\n\tObject.defineProperty(instance, 'field', {\n\t\tvalue: (/** @type {string} */ name) => {\n\t\t\tconst new_name = name.endsWith('[]') ? name.slice(0, -2) : name;\n\t\t\tthrow new Error(\n\t\t\t\t`\\`form.field\\` has been removed: Instead of \\`<input name={form.field('${name}')} />\\` do \\`<input {...form.fields.${new_name}.as(type)} />\\``\n\t\t\t);\n\t\t}\n\t});\n\n\tfor (const property of ['input', 'issues']) {\n\t\tObject.defineProperty(instance, property, {\n\t\t\tget() {\n\t\t\t\tconst new_name = property === 'issues' ? 'issues' : 'value';\n\t\t\t\treturn new Proxy(\n\t\t\t\t\t{},\n\t\t\t\t\t{\n\t\t\t\t\t\tget(_, prop) {\n\t\t\t\t\t\t\tconst prop_string = typeof prop === 'string' ? prop : String(prop);\n\t\t\t\t\t\t\tconst old =\n\t\t\t\t\t\t\t\tprop_string.includes('[') || prop_string.includes('.')\n\t\t\t\t\t\t\t\t\t? `['${prop_string}']`\n\t\t\t\t\t\t\t\t\t: `.${prop_string}`;\n\t\t\t\t\t\t\tconst replacement = `.${prop_string}.${new_name}()`;\n\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t`\\`form.${property}\\` has been removed: Instead of \\`form.${property}${old}\\` write \\`form.fields${replacement}\\``\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n}\n","/** @import { Transport } from '@sveltejs/kit' */\nimport * as devalue from 'devalue';\nimport { base64_decode, base64_encode, text_decoder } from './utils.js';\n\n/**\n * @param {string} route_id\n * @param {string} dep\n */\nexport function validate_depends(route_id, dep) {\n\tconst match = /^(moz-icon|view-source|jar):/.exec(dep);\n\tif (match) {\n\t\tconsole.warn(\n\t\t\t`${route_id}: Calling \\`depends('${dep}')\\` will throw an error in Firefox because \\`${match[1]}\\` is a special URI scheme`\n\t\t);\n\t}\n}\n\nexport const INVALIDATED_PARAM = 'x-sveltekit-invalidated';\n\nexport const TRAILING_SLASH_PARAM = 'x-sveltekit-trailing-slash';\n\n/**\n * @param {any} data\n * @param {string} [location_description]\n */\nexport function validate_load_response(data, location_description) {\n\tif (data != null && Object.getPrototypeOf(data) !== Object.prototype) {\n\t\tthrow new Error(\n\t\t\t`a load function ${location_description} returned ${\n\t\t\t\ttypeof data !== 'object'\n\t\t\t\t\t? `a ${typeof data}`\n\t\t\t\t\t: data instanceof Response\n\t\t\t\t\t\t? 'a Response object'\n\t\t\t\t\t\t: Array.isArray(data)\n\t\t\t\t\t\t\t? 'an array'\n\t\t\t\t\t\t\t: 'a non-plain object'\n\t\t\t}, but must return a plain object at the top level (i.e. \\`return {...}\\`)`\n\t\t);\n\t}\n}\n\n/**\n * Try to `devalue.stringify` the data object using the provided transport encoders.\n * @param {any} data\n * @param {Transport} transport\n */\nexport function stringify(data, transport) {\n\tconst encoders = Object.fromEntries(Object.entries(transport).map(([k, v]) => [k, v.encode]));\n\n\treturn devalue.stringify(data, encoders);\n}\n\n/**\n * Stringifies the argument (if any) for a remote function in such a way that\n * it is both a valid URL and a valid file name (necessary for prerendering).\n * @param {any} value\n * @param {Transport} transport\n */\nexport function stringify_remote_arg(value, transport) {\n\tif (value === undefined) return '';\n\n\t// If people hit file/url size limits, we can look into using something like compress_and_encode_text from svelte.dev beyond a certain size\n\tconst json_string = stringify(value, transport);\n\n\tconst bytes = new TextEncoder().encode(json_string);\n\treturn base64_encode(bytes).replaceAll('=', '').replaceAll('+', '-').replaceAll('/', '_');\n}\n\n/**\n * Parses the argument (if any) for a remote function\n * @param {string} string\n * @param {Transport} transport\n */\nexport function parse_remote_arg(string, transport) {\n\tif (!string) return undefined;\n\n\tconst json_string = text_decoder.decode(\n\t\t// no need to add back `=` characters, atob can handle it\n\t\tbase64_decode(string.replaceAll('-', '+').replaceAll('_', '/'))\n\t);\n\n\tconst decoders = Object.fromEntries(Object.entries(transport).map(([k, v]) => [k, v.decode]));\n\n\treturn devalue.parse(json_string, decoders);\n}\n\n/**\n * @param {string} id\n * @param {string} payload\n */\nexport function create_remote_key(id, payload) {\n\treturn id + '/' + payload;\n}\n"],"names":["BROWSER","set_nested_value","object","path_string","value","deep_set","split_path","convert_formdata","data","result","key","is_array","values","entry","v","BINARY_FORM_CONTENT_TYPE","BINARY_FORM_VERSION","deserialize_binary_form","request","form_data","reader","chunks","get_chunk","index","i","chunk","get_buffer","offset","length","start_chunk","chunk_start","chunk_index","chunk_end","buffer","cursor","header","header_view","data_length","file_offsets_length","data_buffer","file_offsets","files_start_offset","file_offsets_buffer","text_decoder","meta","devalue","name","type","size","last_modified","LazyFile","has_more","#get_chunk","#offset","#buffer","start","end","contentType","controller","path_regex","path","check_prototype_pollution","keys","current","exists","inner","final_key","normalize_issue","issue","server","normalized","segment","flatten_issues","issues","deep_get","create_field_proxy","target","get_input","set_input","get_issues","get_value","prop","build_path_string","newValue","all_issues","input_value","base_props","fileList","f","file","fileListLike","INVALIDATED_PARAM","TRAILING_SLASH_PARAM","stringify","transport","encoders","k","stringify_remote_arg","json_string","bytes","base64_encode","parse_remote_arg","string","base64_decode","decoders","create_remote_key","id","payload"],"mappings":"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","x_google_ignoreList":[0,1,2]}